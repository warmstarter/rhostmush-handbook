<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Converting database betwen GDBM and QDBM</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/epub.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="converting-database-betwen-gdbm-and-qdbm">
<h1>Converting database betwen GDBM and QDBM</h1>
<p>Ok, if you plan to recompile your game that is using GDBM to QDBM, or visa versa
some bad news.</p>
<p>The databases are NOT COMPATIBLE to each other, at least in the binary form.</p>
<div class="section" id="downgrading-qdbm-to-gdbm">
<h2>Downgrading QDBM to GDBM</h2>
<p>I would NEVER change from QDBM back to GDBM, but if you’re set on it these steps:</p>
<p>You would use the same steps if you plan to move QDBM to GDBM.  I however would
not do this.  Moving from QDBM to GDBM is a huge step backwards.  Seriously,
don’t do it unless you have absolutely no other recourse.</p>
<p>However, WARNING:
IF you plan (for whatever reason) to move from QDBM to GDBM, you should verify
the following:
1.  You have on a 64 bit system, no object that has more than 400 attributes on it.
2.  You have on a 32 bit system, no object that has more than 750 attributes on it.
3.  Any CONTENT of any attribute must be below 4000 characters in length.
4.  Once you have that done, you may follow the procedures below on converting (upgrade)</p>
<blockquote>
<div><p>from GDBM to QDBM.  This works the same as converting (downgrading)
QDBM back down to GDBM</p>
</div></blockquote>
</div>
<div class="section" id="upgradging-gdbm-to-qdbm">
<h2>Upgradging GDBM to QDBM</h2>
<p>Now, if you’ve kept reading and plan to convert your GDBM database to QDBM great news!
It’s more stable, it’s faster, and lets you have far more flexibility.</p>
<p>So, BEFORE YOU RECOMPILE YOUR CODE.  This is what you have to do.</p>
<div class="section" id="while-logged-in-to-your-mush-issue-the-following-commands">
<h3>While logged in to your mush, issue the following commands</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>&#64;dump/flat    – This will make a flatfile dump of your MUSH database</p></li>
<li><p>wmail/unload  – This will make a flatfile dump of your MAIL database</p></li>
<li><p>&#64;areg/unload  – If you use the AutoRegistration engine, this dumps it</p></li>
<li><p>newsdb/unload – If you use the hardcoded news/bbs engine.  This dumps it</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="verify-the-files-exist">
<h3>Verify the files exist</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li></li>
<li></li>
<li><p>(Optional) .. Server/game/data/RhostMUSH.areg.dump</p></li>
<li><p>(Optional) .. Server/game/data/RhostMUSH.news.flat</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="shutdown-the-mush">
<h3>Shutdown the MUSH</h3>
<p>&#64;shutdown your mush</p>
</div>
<div class="section" id="from-the-server-directory">
<h3>From the Server directory</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>make clean</p></li>
<li><p>make confsource
1.  Select QDBM and if you wish at this time increase your LBUF size
2.  Select any other options you may want</p></li>
<li><p>(r)un and let it compile.</p></li>
<li><p>Main DB: Delete (rm) the following files (from Rhost/Server/game/data)
netrhost.gdbm*
netrhost.db
netrhost.db.new
netrhost.db.new.prev</p></li>
<li><p>Mail DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.folder.dir
RhostMUSH.folder.pag
RhostMUSH.mail.dir
RhostMUSH.mail.pag</p></li>
<li><p>(Optional) AutoReg DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.areg.dir
RhostMUSH.areg.pag</p></li>
<li><p>(Optional) News/BBS DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.news.dir
RhostMUSH.news.pag</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="from-the-server-game-directory">
<h3>From the Server/game directory</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>./db_load data/netrhost.gdbm data/netrhost.db.flat data/netrhost.db.new</p></li>
<li><p>./Startmush</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="while-logged-into-the-mush-issue-the-following-commands">
<h3>While logged into the mush issue the following commands</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>Load in the mail database
wmail/load</p></li>
<li><p>(optional) Load in the autoreg database
&#64;areg/load</p></li>
<li><p>(optional) Load in the news/bbs database
newsdb/load</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="verify-that-you-have-qdbm-running-and-your-valid-values">
<h3>Verify that you have QDBM running and your valid values</h3>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>&#64;list options system</p></li>
<li><p>&#64;list options (spammy)</p></li>
</ol>
</div></blockquote>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>