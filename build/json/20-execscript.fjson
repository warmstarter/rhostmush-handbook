{"parents": [], "prev": {"link": "../19-reality/", "title": "Reality levels"}, "next": {"link": "../21-printf/", "title": "Using printf() for advanced text output"}, "title": "Execscript and external programs and scripts", "meta": null, "body": "<div class=\"section\" id=\"execscript-and-external-programs-and-scripts\">\n<h1>Execscript and external programs and scripts<a class=\"headerlink\" href=\"#execscript-and-external-programs-and-scripts\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"mush-variables\">\n<h2>Mush variables<a class=\"headerlink\" href=\"#mush-variables\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"built-in-variables\">\n<h3>Built in variables<a class=\"headerlink\" href=\"#built-in-variables\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Variable                   Description\nMUSH_PLAYER                player dbref#\nMUSH_CAUSE                 cause dbref#\nMUSH_CALLER                caller dbref#\nMUSH_OWNER                 owner of player dbref#\nMUSH_FLAGS                 space delimited list of flags on player\nMUSH_TOGGLES               space delimited list of toggles on player\nMUSH_OFLAGS                space delimited list of flags of player owner\nMUSH_OTOGGLES              space delimited list of toggles of player owner\nMUSHL_VARS                 space delimited list of MUSH attributes from player</p>\n<blockquote>\n<div><p>This is passed from the mush\u2019s EXECSCRIPT_VARS attr</p>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"dynamic-variables\">\n<h3>Dynamic variables<a class=\"headerlink\" href=\"#dynamic-variables\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"simple\">\n<dt>MUSHV_&lt;arg&gt;                &lt;arg&gt; variable passed from MUSHL_VARS</dt><dd><p>These are the attributes from EXECSCRIPT_VARS</p>\n</dd>\n</dl>\n</div>\n<div class=\"section\" id=\"register-variables\">\n<h3>Register variables<a class=\"headerlink\" href=\"#register-variables\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>MUSHQ_&lt;arg&gt;                setq registers 0-9 and a-z\nMUSHQN_&lt;arg&gt;               labels that are assigned the setq vars\nMUSHN_&lt;arg&gt;                The labels that were defined by any register</p>\n<blockquote>\n<div><dl class=\"simple\">\n<dt>Note: they must be ASCII-7 clean and contain no</dt><dd><p>white spaces</p>\n</dd>\n</dl>\n</div></blockquote>\n</div>\n</div>\n<div class=\"section\" id=\"set-object\">\n<h2>set object<a class=\"headerlink\" href=\"#set-object\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The script executed with execscript() will read in a file with the same name\nas the script ending in \u2018.set\u2019.  This is a loader object that will set attributes\nand registers back into the mush that you wish to pass from the script. The\nfields are SPACE SEPARATED.  The values are NOT evaluated.</p>\n<div class=\"section\" id=\"the-format-of-the-fields-are\">\n<h3>The format of the fields are<a class=\"headerlink\" href=\"#the-format-of-the-fields-are\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"section\" id=\"id1\">\n<h4>Dynamic variables<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>VARNAME        OWNER        CONTENTS (or leave null to clear)</p>\n<div class=\"section\" id=\"examples\">\n<h5>Examples<a class=\"headerlink\" href=\"#examples\" title=\"Permalink to this headline\">\u00b6</a></h5>\n<p>SEX #123 Male\nDESC #123 %r%tThis is a willow tree of unique description%r%rIt sways in the wind.\nRED #123 This is the color %ch%crred%cn.\nWIPETHISATTR #123\nMULTILINE #123 This is a line\nthat continues on\nbecause of the line feed (a control-M) on each line\non the lines above</p>\n</div>\n</div>\n<div class=\"section\" id=\"id2\">\n<h4>Register variables<a class=\"headerlink\" href=\"#id2\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>REGISTER       Q            CONTENTS (or leave null to clear)</p>\n<div class=\"section\" id=\"examples-the-last-example-clears-register-0\">\n<h5>Examples (The last example clears register 0)<a class=\"headerlink\" href=\"#examples-the-last-example-clears-register-0\" title=\"Permalink to this headline\">\u00b6</a></h5>\n<p>W Q This is stored in register W\n1 Q This is stored in register 1\n0 Q\nfoo QN this sets register with label \u2018foo\u2019</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"example-bash-script\">\n<h2>Example bash script<a class=\"headerlink\" href=\"#example-bash-script\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>#!/bin/bash\necho \u201cThis was called by player ${MUSH_PLAYER} that is owned by ${MUSH_OWNER}\u201d\necho \u201cDisplaying Registers:\u201d\nregs=\u201d0 1 2 3 4 5 6 7 8 9 A B C D E F G H I J K L M N O P Q R S T U V W X Y Z\u201d\nfor list in ${regs}\ndo</p>\n<blockquote>\n<div><p>eval echo \u201cRegister ${list}: ${MUSHQ_${list}}\u201d</p>\n</div></blockquote>\n<p>done\necho \u201cDisplaying variables:\u201d\nfor vars in ${MUSHL_VARS}\ndo</p>\n<blockquote>\n<div><p>eval echo \u201cVariable ${vars}: ${MUSHV_${vars}}\u201d</p>\n</div></blockquote>\n<p>done</p>\n</div>\n<div class=\"section\" id=\"notes-and-warnings\">\n<h2>Notes and warnings<a class=\"headerlink\" href=\"#notes-and-warnings\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>While MUSHL_VARS are sanitized on what is allowable as a mush variable, this\nis not necessarilly sanitized on what the calling script can fetch as a valid\nvariable.  Of note, you can not set environment variables that contain an\nequals sign.  Be aware of this limitation.</p>\n<p>Remember, MUSHL_VARS is the environment variable seen by the script.\nThis is EXECSCRIPT_VARS on the mush itself, that is the attribute set\non the target that contains the execscript() that is being executed.</p>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["21-printf", "Using printf() for advanced text output", "N", "next"], ["19-reality", "Reality levels", "P", "previous"]], "sourcename": "20-execscript.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Execscript and external programs and scripts</a><ul>\n<li><a class=\"reference internal\" href=\"#mush-variables\">Mush variables</a><ul>\n<li><a class=\"reference internal\" href=\"#built-in-variables\">Built in variables</a></li>\n<li><a class=\"reference internal\" href=\"#dynamic-variables\">Dynamic variables</a></li>\n<li><a class=\"reference internal\" href=\"#register-variables\">Register variables</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#set-object\">set object</a><ul>\n<li><a class=\"reference internal\" href=\"#the-format-of-the-fields-are\">The format of the fields are</a><ul>\n<li><a class=\"reference internal\" href=\"#id1\">Dynamic variables</a><ul>\n<li><a class=\"reference internal\" href=\"#examples\">Examples</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#id2\">Register variables</a><ul>\n<li><a class=\"reference internal\" href=\"#examples-the-last-example-clears-register-0\">Examples (The last example clears register 0)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#example-bash-script\">Example bash script</a></li>\n<li><a class=\"reference internal\" href=\"#notes-and-warnings\">Notes and warnings</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "20-execscript", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12", "insegel_version": "1.1.0"}