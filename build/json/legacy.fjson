{"parents": [], "prev": {"link": "../windows/", "title": "<span class=\"section-number\">12. </span>Requirements if Using Windows"}, "next": {"link": "../flags/", "title": "<span class=\"section-number\">14. </span>Comparison of Flags"}, "title": "<span class=\"section-number\">13. </span>Upgrading a Legacy RhostMUSH Installation", "meta": {}, "body": "<div class=\"section\" id=\"upgrading-a-legacy-rhostmush-installation\">\n<h1><span class=\"section-number\">13. </span>Upgrading a Legacy RhostMUSH Installation<a class=\"headerlink\" href=\"#upgrading-a-legacy-rhostmush-installation\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"converting-database-betwen-gdbm-and-qdbm\">\n<h2><span class=\"section-number\">13.1. </span>Converting database betwen GDBM and QDBM<a class=\"headerlink\" href=\"#converting-database-betwen-gdbm-and-qdbm\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Ok, if you plan to recompile your game that is using GDBM to QDBM, or visa versa\nsome bad news.</p>\n<p>The databases are NOT COMPATIBLE to each other, at least in the binary form.</p>\n<div class=\"section\" id=\"downgrading-qdbm-to-gdbm\">\n<h3><span class=\"section-number\">13.1.1. </span>Downgrading QDBM to GDBM<a class=\"headerlink\" href=\"#downgrading-qdbm-to-gdbm\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>I would NEVER change from QDBM back to GDBM, but if you\u2019re set on it these steps:</p>\n<p>You would use the same steps if you plan to move QDBM to GDBM.  I however would\nnot do this.  Moving from QDBM to GDBM is a huge step backwards.  Seriously,\ndon\u2019t do it unless you have absolutely no other recourse.</p>\n<p>IF you plan (for whatever reason) to move from QDBM to GDBM, you should verify\nthe following</p>\n</div>\n<ol class=\"arabic simple\">\n<li><p>You have on a 64 bit system, no object that has more than 400 attributes on it.</p></li>\n<li><p>You have on a 32 bit system, no object that has more than 750 attributes on it.</p></li>\n<li><p>Any CONTENT of any attribute must be below 4000 characters in length.</p></li>\n<li><p>Once you have that done, you may follow the procedures below on converting (upgrade) from GDBM to QDBM.  This works the same as converting (downgrading) QDBM back down to GDBM</p></li>\n</ol>\n</div>\n<div class=\"section\" id=\"upgradging-gdbm-to-qdbm\">\n<h3><span class=\"section-number\">13.1.2. </span>Upgradging GDBM to QDBM<a class=\"headerlink\" href=\"#upgradging-gdbm-to-qdbm\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Now, if you\u2019ve kept reading and plan to convert your GDBM database to QDBM great news!\nIt\u2019s more stable, it\u2019s faster, and lets you have far more flexibility.</p>\n<p>So, BEFORE YOU RECOMPILE YOUR CODE.  This is what you have to do.</p>\n<div class=\"section\" id=\"while-logged-in-to-your-mush-issue-the-following-commands\">\n<h4><span class=\"section-number\">13.1.2.1. </span>While logged in to your mush, issue the following commands<a class=\"headerlink\" href=\"#while-logged-in-to-your-mush-issue-the-following-commands\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha simple\">\n<li><p>&#64;dump/flat    \u2013 This will make a flatfile dump of your MUSH database</p></li>\n<li><p>wmail/unload  \u2013 This will make a flatfile dump of your MAIL database</p></li>\n<li><p>&#64;areg/unload  \u2013 If you use the AutoRegistration engine, this dumps it</p></li>\n<li><p>newsdb/unload \u2013 If you use the hardcoded news/bbs engine.  This dumps it</p></li>\n</ol>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"verify-the-files-exist\">\n<h4><span class=\"section-number\">13.1.2.2. </span>Verify the files exist<a class=\"headerlink\" href=\"#verify-the-files-exist\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha simple\">\n<li><p>Server/game/data/netrhost.db.flat</p></li>\n<li><p>Server/game/data/RhostMUSH.dump.folder</p></li>\n<li><p>Server/game/data/RhostMUSH.dump.mail</p></li>\n<li><p>(Optional) Server/game/data/RhostMUSH.areg.dump</p></li>\n<li><p>(Optional) Server/game/data/RhostMUSH.news.flat</p></li>\n</ol>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"shutdown-the-mush\">\n<h4><span class=\"section-number\">13.1.2.3. </span>Shutdown the MUSH<a class=\"headerlink\" href=\"#shutdown-the-mush\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>&#64;shutdown your mush</p>\n</div>\n<div class=\"section\" id=\"from-the-server-directory\">\n<h4><span class=\"section-number\">13.1.2.4. </span>From the Server directory<a class=\"headerlink\" href=\"#from-the-server-directory\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha\">\n<li><p>make clean</p></li>\n<li><p>make confsource\n1.  Select QDBM and if you wish at this time increase your LBUF size\n2.  Select any other options you may want</p></li>\n<li><p>(r)un and let it compile.</p></li>\n<li><p>Main DB: Delete (rm) the following files (from Rhost/Server/game/data):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">gdbm</span><span class=\"o\">*</span>\n<span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span>\n<span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">new</span>\n<span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"o\">.</span><span class=\"n\">prev</span>\n</pre></div>\n</div>\n</li>\n<li><p>Mail DB: Delete (rm) the following files (from Rhost/Server/game/data):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">folder</span><span class=\"o\">.</span><span class=\"n\">dir</span>\n<span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">folder</span><span class=\"o\">.</span><span class=\"n\">pag</span>\n<span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">mail</span><span class=\"o\">.</span><span class=\"n\">dir</span>\n<span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">mail</span><span class=\"o\">.</span><span class=\"n\">pag</span>\n</pre></div>\n</div>\n</li>\n<li><p>(Optional) AutoReg DB: Delete (rm) the following files (from Rhost/Server/game/data):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">areg</span><span class=\"o\">.</span><span class=\"n\">dir</span>\n<span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">areg</span><span class=\"o\">.</span><span class=\"n\">pag</span>\n</pre></div>\n</div>\n</li>\n<li><p>(Optional) News/BBS DB: Delete (rm) the following files (from Rhost/Server/game/data):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">news</span><span class=\"o\">.</span><span class=\"n\">dir</span>\n<span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">news</span><span class=\"o\">.</span><span class=\"n\">pag</span>\n</pre></div>\n</div>\n</li>\n</ol>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"from-the-server-game-directory\">\n<h4><span class=\"section-number\">13.1.2.5. </span>From the Server/game directory<a class=\"headerlink\" href=\"#from-the-server-game-directory\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha\">\n<li><p>Load the database:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">db_load</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">gdbm</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">flat</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">new</span>\n</pre></div>\n</div>\n</li>\n<li><p>Start the MUSH back:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">Startmush</span>\n</pre></div>\n</div>\n</li>\n</ol>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"while-logged-into-the-mush-issue-the-following-commands\">\n<h4><span class=\"section-number\">13.1.2.6. </span>While logged into the mush issue the following commands<a class=\"headerlink\" href=\"#while-logged-into-the-mush-issue-the-following-commands\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha\">\n<li><p>Load in the mail database:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">wmail</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n<li><p>(optional) Load in the autoreg database:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@areg</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n<li><p>(optional) Load in the news/bbs database:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">newsdb</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n</ol>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"verify-that-you-have-qdbm-running-and-your-valid-values\">\n<h4><span class=\"section-number\">13.1.2.7. </span>Verify that you have QDBM running and your valid values<a class=\"headerlink\" href=\"#verify-that-you-have-qdbm-running-and-your-valid-values\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<blockquote>\n<div><ol class=\"upperalpha simple\">\n<li><p>&#64;list options system</p></li>\n<li><p>&#64;list options (spammy)</p></li>\n</ol>\n</div></blockquote>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"updating-rhostmush-prior-to-3-9-5p2\">\n<h2><span class=\"section-number\">13.2. </span>Updating RhostMUSH prior to 3.9.5p2<a class=\"headerlink\" href=\"#updating-rhostmush-prior-to-3-9-5p2\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Ok.</p>\n<p>So you\u2019re running an old RhostMUSH.</p>\n<p>One prior to 3.9.5p2 and want to take advantage of the new\nformat of the Makefile and the automated mysql stuff and\nall the other goodies that isn\u2019t really (easilly) done\nwith just patch.sh.</p>\n<p>Well, you\u2019re in luck.  It is actually fairly easy to do.</p>\n<p>This is what you have to do.</p>\n<p>First thing\u2019s first.</p>\n<ol class=\"arabic\">\n<li><p>Log into your existing mush.  Let\u2019s make current backups\nof all your flatfiles.  Issue:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@dump</span><span class=\"o\">/</span><span class=\"n\">flat</span>\n<span class=\"n\">wmail</span><span class=\"o\">/</span><span class=\"n\">unload</span>\n<span class=\"nd\">@areg</span><span class=\"o\">/</span><span class=\"n\">unload</span>\n<span class=\"n\">newsdb</span><span class=\"o\">/</span><span class=\"n\">unload</span>\n</pre></div>\n</div>\n</li>\n<li><p>Shutdown your game:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@shutdown</span>\n</pre></div>\n</div>\n</li>\n<li><p>Make an image of all your current backed up files.  From The Server/game directory you would type:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">backup_flat</span><span class=\"o\">.</span><span class=\"n\">sh</span> <span class=\"o\">-</span><span class=\"n\">s</span>\n</pre></div>\n</div>\n</li>\n</ol>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>Please remember the \u2018-s\u2019 to the ./backup_flat.sh.</p>\n</div>\n<ol class=\"arabic\" start=\"4\">\n<li><p>Make note of the most recently created file in the directory Server/game/oldflat.  It\u2019s usually named something like:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">RhostMUSH</span><span class=\"o\">.</span><span class=\"n\">dbflat1</span><span class=\"o\">.</span><span class=\"n\">tar</span><span class=\"o\">.</span><span class=\"n\">gz</span>\n</pre></div>\n</div>\n</li>\n</ol>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>You will need this file later.</p>\n</div>\n<ol class=\"arabic\" start=\"5\">\n<li><p>Rename your \u2018Rhost\u2019 directory to something else.  This is the directory that you have containing the \u2018Server\u2019 directory.  Name it anything you want other than \u2018Rhost\u2019.  For those not used to unix you would type:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">mv</span> <span class=\"n\">Rhost</span> <span class=\"n\">Rhost_old</span>\n</pre></div>\n</div>\n</li>\n<li><p>Pull in the latest Rhost.  You would type:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">clone</span> <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">github</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"o\">/</span><span class=\"n\">RhostMUSH</span><span class=\"o\">/</span><span class=\"n\">trunk</span> <span class=\"n\">Rhost</span>\n</pre></div>\n</div>\n</li>\n</ol>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>You would type this in the same directory you have renamed your old \u2018Rhost\u2019 directory</p>\n</div>\n<ol class=\"arabic\" start=\"7\">\n<li><p>go into the Rhost/Server directory.   Type:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">make</span> <span class=\"n\">confsource</span>\n</pre></div>\n</div>\n<p>Select what options you want (including the mysql and other goodies) then compile it (also within the menu, it\u2019s the \u2018r\u2019 option).</p>\n</li>\n<li><p>Once your game is compiled and ready to go you need to copy in the data from your old game.  Copy the RhostMUSH.dbflat1.tar.gz we mentioned in step #4 to the Server/game directory of your NEW GAME DIRECTORY.  From within the \u2018game\u2019 directory of your current game you should be able to issue (if you named the old one Rhost_old). Again this needs to be done FROM YOUR Server/game directory!!!</p></li>\n</ol>\n<blockquote>\n<div><ol class=\"upperalpha\">\n<li><p>cp netrhost.conf netrhost.conf.orig</p></li>\n<li><p>cp ../../Rhost_old/Server/game/RhostMUSH.dbflat1.tar.gz .</p></li>\n<li><p>tar -zxvf RhostMUSH.dbflat1.tar.gz</p></li>\n<li><p>Compare your current netrhost.conf to the default one that came with the source (that you renamed to netrhost.conf.orig).  Likely the only sections you have to add to your current netrhost.conf (that came with your RhostMUSH.dbflat1.tar.gz archive), will be toward the end, with the include rhost_ingame.conf and rhost_mysql.conf.  Depending on how old your game is coming from you may need to add more options.  Any config option that is the same between the netrhost.conf files do not have to be copied over, and you want to keep your custom settings (like don\u2019t port or other stuff you have already customized).</p></li>\n<li><p>Load in your flatfile information:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">db_load</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">gdbm</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">flat</span> <span class=\"n\">data</span><span class=\"o\">/</span><span class=\"n\">netrhost</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">new</span>\n</pre></div>\n</div>\n</li>\n<li><p>Your ./Startmush should re-index all your txt files you originally made:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"o\">./</span><span class=\"n\">Startmush</span>\n</pre></div>\n</div>\n</li>\n<li><p>In your game type the following as an immortal or as #1.</p></li>\n</ol>\n<blockquote>\n<div><ol class=\"arabic\">\n<li><p>Load in your mail flatfile:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">wmail</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n<li><p>Load in your autoregistration flatfile (if available):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"nd\">@areg</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n<li><p>Load in your hardcoded bbs flatfile (if available):</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">newsdb</span><span class=\"o\">/</span><span class=\"n\">load</span>\n</pre></div>\n</div>\n</li>\n</ol>\n</div></blockquote>\n</div></blockquote>\n<ol class=\"arabic simple\" start=\"9\">\n<li><p>You should be good to go on a current directory structure for Rhost.  Enjoy!</p></li>\n</ol>\n</div>\n<div class=\"section\" id=\"adding-mysql-to-rhostmush-older-than-3-9-5p2\">\n<h2><span class=\"section-number\">13.3. </span>Adding MySQL to RhostMUSH older than 3.9.5p2<a class=\"headerlink\" href=\"#adding-mysql-to-rhostmush-older-than-3-9-5p2\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>MySQL is now native in RhostMUSH as of 3.9.5p2.</p>\n<div class=\"admonition warning\">\n<p class=\"admonition-title\">Warning</p>\n<p>To autodetect it, YOU MUST HAVE mysql_config installed and running on your server.  Without this, even if you have mysql db installed it won\u2019t be able to recognize the parameters you will need for it and will thus fail.  Please check your linux distribution to see what packages are needed to install mysql_config.</p>\n</div>\n<p>Download the git repository to a seperate directory so that you can\ncopy over the files that it requires you to.</p>\n<p>Suggestion:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">git</span> <span class=\"n\">clone</span> <span class=\"n\">https</span><span class=\"p\">:</span><span class=\"o\">//</span><span class=\"n\">github</span><span class=\"o\">.</span><span class=\"n\">com</span><span class=\"o\">/</span><span class=\"n\">RhostMUSH</span><span class=\"o\">/</span><span class=\"n\">trunk</span> <span class=\"o\">~/</span><span class=\"n\">tmprho</span>\n</pre></div>\n</div>\n<p>If you are patching UP from an older version, you need to update\nthe following files:</p>\n<ol class=\"arabic simple\">\n<li><p>update your src/Makefile to the one in the 3.9.5p2+ repo\n( cp ~/tmprho/Server/src/Makefile ~/Rhost/Server/src/Makefile )</p></li>\n<li><p>update your bin/asksource.* files to the one in the 3.9.5p2+ repo\n( cp ~/tmprho/Server/bin/asksource.* ~/Rhost/Server/bin/ )</p></li>\n<li><p>append \u2018include rhost_mysql.conf\u2019 BEFORE the rhost_ingame.conf file\nand before the section that says \u2018define local aliases\u2019 toward the end of\nyour netrhost.conf file.\n( edit your ~/Rhost/Server/game/netrhost.conf file )</p></li>\n<li><p>copy the game/rhost_mysql.conf file from the 3.9.5p2+ repo\n( cp ~/tmprho/Server/game/rhost_mysql.conf ~/Rhost/Server/game/ )</p></li>\n<li><p>The following lines have to be REPLACED/CHANGED in local.c ( toward the top ):\n( you may edit this or copy the one from the other distro )\n( do either:  edit ~/Rhost/Server/src/local.c )\n(        or:  cp ~/tmprho/Server/src/local.c ~/Rhost/Server/src/local.c )</p></li>\n</ol>\n<div class=\"admonition note\">\n<p class=\"admonition-title\">Note</p>\n<p>IF REPLACING/CHANGING local.c COPY BELOW</p>\n</div>\n<div class=\"highlight-c notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cm\">/* Called when the mush starts up, immediatly prior to the main game</span>\n<span class=\"cm\"> * loop being entered. By this point all databases are loaded and</span>\n<span class=\"cm\"> * all variables configured.</span>\n<span class=\"cm\"> */</span>\n<span class=\"cp\">#ifdef MYSQL_VERSION</span>\n   <span class=\"k\">extern</span> <span class=\"kt\">void</span> <span class=\"n\">local_mysql_init</span><span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">);</span>\n   <span class=\"k\">extern</span> <span class=\"kt\">int</span> <span class=\"n\">sql_shutdown</span><span class=\"p\">(</span><span class=\"n\">dbref</span> <span class=\"n\">player</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n\n<span class=\"cp\">#ifdef SQLITE</span>\n   <span class=\"k\">extern</span> <span class=\"kt\">void</span> <span class=\"n\">local_sqlite_init</span><span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif </span><span class=\"cm\">/* SQLITE */</span><span class=\"cp\"></span>\n\n<span class=\"kt\">void</span> <span class=\"nf\">local_startup</span><span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n<span class=\"cp\">#ifdef SQLITE</span>\n   <span class=\"n\">local_sqlite_init</span><span class=\"p\">();</span>\n<span class=\"cp\">#endif </span><span class=\"cm\">/* SQLITE */</span><span class=\"cp\"></span>\n<span class=\"cp\">#ifdef MYSQL_VERSION</span>\n   <span class=\"n\">local_mysql_init</span><span class=\"p\">();</span>\n<span class=\"cp\">#endif</span>\n   <span class=\"n\">load_regexp_functions</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n\n<span class=\"cm\">/* Called immediatly after the main game loop exits. At this point</span>\n<span class=\"cm\"> * all databases and variables are still configured</span>\n<span class=\"cm\"> */</span>\n<span class=\"kt\">void</span> <span class=\"nf\">local_shutdown</span><span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n<span class=\"cp\">#ifdef MYSQL_VERSION</span>\n   <span class=\"n\">sql_shutdown</span><span class=\"p\">(</span><span class=\"mi\">-1</span><span class=\"p\">);</span>\n<span class=\"cp\">#endif</span>\n<span class=\"p\">}</span>\n</pre></div>\n</div>\n<ol class=\"arabic simple\" start=\"6\">\n<li><p>Issue \u2018make clean\u2019 then make confsource to rebuild using the latest\nbuilder script to build in the mysql changes.</p></li>\n</ol>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["flags", "<span class=\"section-number\">14. </span>Comparison of Flags", "N", "next"], ["windows", "<span class=\"section-number\">12. </span>Requirements if Using Windows", "P", "previous"]], "sourcename": "legacy.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">13. Upgrading a Legacy RhostMUSH Installation</a><ul>\n<li><a class=\"reference internal\" href=\"#converting-database-betwen-gdbm-and-qdbm\">13.1. Converting database betwen GDBM and QDBM</a><ul>\n<li><a class=\"reference internal\" href=\"#downgrading-qdbm-to-gdbm\">13.1.1. Downgrading QDBM to GDBM</a></li>\n<li><a class=\"reference internal\" href=\"#upgradging-gdbm-to-qdbm\">13.1.2. Upgradging GDBM to QDBM</a><ul>\n<li><a class=\"reference internal\" href=\"#while-logged-in-to-your-mush-issue-the-following-commands\">13.1.2.1. While logged in to your mush, issue the following commands</a></li>\n<li><a class=\"reference internal\" href=\"#verify-the-files-exist\">13.1.2.2. Verify the files exist</a></li>\n<li><a class=\"reference internal\" href=\"#shutdown-the-mush\">13.1.2.3. Shutdown the MUSH</a></li>\n<li><a class=\"reference internal\" href=\"#from-the-server-directory\">13.1.2.4. From the Server directory</a></li>\n<li><a class=\"reference internal\" href=\"#from-the-server-game-directory\">13.1.2.5. From the Server/game directory</a></li>\n<li><a class=\"reference internal\" href=\"#while-logged-into-the-mush-issue-the-following-commands\">13.1.2.6. While logged into the mush issue the following commands</a></li>\n<li><a class=\"reference internal\" href=\"#verify-that-you-have-qdbm-running-and-your-valid-values\">13.1.2.7. Verify that you have QDBM running and your valid values</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#updating-rhostmush-prior-to-3-9-5p2\">13.2. Updating RhostMUSH prior to 3.9.5p2</a></li>\n<li><a class=\"reference internal\" href=\"#adding-mysql-to-rhostmush-older-than-3-9-5p2\">13.3. Adding MySQL to RhostMUSH older than 3.9.5p2</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "legacy", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12", "karma_sphinx_theme_version": "0.0.8"}