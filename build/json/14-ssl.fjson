{"parents": [], "prev": {"link": "../13-signals/", "title": "Signals and why you need them for control"}, "next": {"link": "../15-bitlevels/", "title": "Multi-tiered bitlevel systems"}, "title": "Setting up an SSL tunnel for secure connection options", "meta": null, "body": "<div class=\"section\" id=\"setting-up-an-ssl-tunnel-for-secure-connection-options\">\n<h1>Setting up an SSL tunnel for secure connection options<a class=\"headerlink\" href=\"#setting-up-an-ssl-tunnel-for-secure-connection-options\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"quickstart-for-ssl-setup-with-stunnel\">\n<h2>Quickstart for SSL setup with stunnel<a class=\"headerlink\" href=\"#quickstart-for-ssl-setup-with-stunnel\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ol class=\"arabic\">\n<li><p>Modify your netrhost.conf file and add/change the following parameters:\nA. stunnel_reip 1\nB. stunnel_cmd SECRET-MAGIC-COOKIE</p>\n<blockquote>\n<div><ol class=\"arabic simple\">\n<li><p>SECRET-MAGIC-COOKIE is a case sensitive single word phrase.  Any\nprintable character other than the \u2018#\u2019 character is allowable.\nYou may use up to 30 characters.</p></li>\n<li><p>Make sure the secret is a hard to guess phrase.  This is used\nby stunnel to forward on the originating IP address.</p></li>\n</ol>\n</div></blockquote>\n<ol class=\"upperalpha\" start=\"3\">\n<li><p>stunnel_host localhost 127.0.0.1 othersite.goes.here\n1.  This is optional.\n2.  If you do not specify it it defaults to \u2018localhost 127.0.0.1\u2019.</p>\n<blockquote>\n<div><p>If your domain has a unique name like \u2018localhost.localdomain\u2019\nlike some ubuntu distributions, then you should customize your\nstunnel_host.</p>\n</div></blockquote>\n</li>\n</ol>\n</li>\n<li><p>go into the stunnel directory</p></li>\n<li><p>./stunnel_setup.sh\nA. Choose the defaults or alter them based on preferences\nB. Make sure to choose the warpbubble conf file</p></li>\n<li><p>./stunnel_start.sh</p></li>\n<li><p>Use ./stunnel_stop.sh to stop the SSL tunnel at any time</p></li>\n</ol>\n<p>You do not need to shutdown the ssl handler if you shutdown the mush.  They\nare entirely separate processes.</p>\n</div>\n<div class=\"section\" id=\"detailed-ssl-setup-with-stunnel\">\n<h2>Detailed SSL setup with stunnel<a class=\"headerlink\" href=\"#detailed-ssl-setup-with-stunnel\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To setup SSL connectivity, we use the STUNNEL application to tunnel SSL to\nthe mush.  This acts a bit like a man in the middle but remains controlled\nby the game owner which would have access to the end point anyway.</p>\n<p>Note: it is assumed you will have already initially set up your netrhost.conf.</p>\n<div class=\"section\" id=\"stunnel-directory\">\n<h3>stunnel directory<a class=\"headerlink\" href=\"#stunnel-directory\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>You would set up the stunnel from the \u2018stunnel\u2019 directory.  There the following\nfiles are of relevance:</p>\n<p>README                     \u2013 a readme explaining the points of stunnel\nstunnel.conf.example       \u2013 The example stunnel.conf file.  If you wish to</p>\n<blockquote>\n<div><p>create this manually you\u2019re welcome to.  Just\nmake sure the end file is stunnel.conf</p>\n</div></blockquote>\n<dl class=\"simple\">\n<dt>stunnel_setup.sh           \u2013 the script to build a stunnel.conf file for you</dt><dd><p>which will be dropped at your specified location.</p>\n</dd>\n</dl>\n<p>stunnel_kill.sh            \u2013 Stop/terminate the stunnel process.\nstunnel_start.sh           \u2013 Start the stunnel process.\nwarpbubble.pl              \u2013 the perl script that handles stunnel to mush</p>\n<blockquote>\n<div><p>connectivity.</p>\n</div></blockquote>\n<dl class=\"simple\">\n<dt>stunnel_src                \u2013 If you do not have stunnel, this directory will</dt><dd><p>allow you to download, compile and locally install.</p>\n</dd>\n</dl>\n</div>\n<div class=\"section\" id=\"modifying-netrhost-conf\">\n<h3>Modifying netrhost.conf<a class=\"headerlink\" href=\"#modifying-netrhost-conf\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>To be able to utilize SSL, you first must set your netrhost.conf file with\nthe relevant information to enable SSL connectiions.  These three config\noptions must be set to be able to use SSL, however, sconnect_host if\nnot set will default to \u2018localhost 127.0.0.1\u2019.</p>\n<dl class=\"simple\">\n<dt>sconnect_reip 1         \u2013 This enables the SSL tunnel layer handler within</dt><dd><p>rhost.</p>\n</dd>\n<dt>sconnect_cmd XYZZY      \u2013 this will set the secret SSL command handshake</dt><dd><p>command to XYZZY.  This is case sensitive and can\nbe up to 31 characters.  Please make sure to only\nuse printable non-whitespace characters.\nErgo: one word</p>\n</dd>\n<dt>sconnect_host wildcards \u2013 This allows wildcarded sites (one or more) to allow</dt><dd><p>to access the sconnect/stunnel handler.  This\ndefaults to \u2018localhost\u2019 and \u2018127.0.0.1\u2019 so if you\nhave \u2018localhost.localdomain\u2019 instead then you must\nset this to whatever is seen as \u2018localhost\u2019 to you.\nYou can verify this by checking your /etc/hosts\nfile.</p>\n</dd>\n<dt>Note: the sconnect_host is optional.  If you do not specify it, it will</dt><dd><p>default to two values:  \u2018localhost\u2019 and \u2018127.0.0.1\u2019.</p>\n</dd>\n</dl>\n</div>\n<div class=\"section\" id=\"running-the-stunnel-setup-program\">\n<h3>Running the stunnel setup program<a class=\"headerlink\" href=\"#running-the-stunnel-setup-program\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>At this point you\u2019re ready to run the stunnel setup program.  So at this point\ntype the following:</p>\n<blockquote>\n<div><p>./stunnel_setup.sh</p>\n</div></blockquote>\n<p>This will prompt you through settings.  Most you can select the defaults to.\nThe SSL port you may need to change based on your administrative requirements.\nIt will prompt you with whatever you set for your mush name.  If you have not\nselected a mush name at this point, you can select the defaults.</p>\n<p>You will want to use the config file for warpbubble as this hides the secret.</p>\n<p>Be aware that if you have DNS host lookups disabled on your mush, you\nMUST have 127.0.0.1 as an entry for your sconnect_host file.</p>\n</div>\n<div class=\"section\" id=\"starting-the-stunnel-proxy\">\n<h3>Starting the stunnel proxy<a class=\"headerlink\" href=\"#starting-the-stunnel-proxy\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>When you have your stunnel.conf file to the way you want, you then\nissue the following command to run your SSL layer.</p>\n<blockquote>\n<div><p>./stunnel_start.sh</p>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"shutting-down-the-stunnel-proxy\">\n<h3>Shutting down the stunnel proxy<a class=\"headerlink\" href=\"#shutting-down-the-stunnel-proxy\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>If ever you need to bring down the SSL layer, you may kill it with the command:</p>\n<blockquote>\n<div><p>./stunnel_stop.sh</p>\n</div></blockquote>\n</div>\n<div class=\"section\" id=\"configuring-firewall-on-the-host\">\n<h3>Configuring firewall on the host<a class=\"headerlink\" href=\"#configuring-firewall-on-the-host\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Please be aware that the port that the SSL layer is on must be opened\nin any firewall rule you specified to allow the connectivity.  This also must\nnot be the port the mush is running on and requires a separate port.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["15-bitlevels", "Multi-tiered bitlevel systems", "N", "next"], ["13-signals", "Signals and why you need them for control", "P", "previous"]], "sourcename": "14-ssl.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Setting up an SSL tunnel for secure connection options</a><ul>\n<li><a class=\"reference internal\" href=\"#quickstart-for-ssl-setup-with-stunnel\">Quickstart for SSL setup with stunnel</a></li>\n<li><a class=\"reference internal\" href=\"#detailed-ssl-setup-with-stunnel\">Detailed SSL setup with stunnel</a><ul>\n<li><a class=\"reference internal\" href=\"#stunnel-directory\">stunnel directory</a></li>\n<li><a class=\"reference internal\" href=\"#modifying-netrhost-conf\">Modifying netrhost.conf</a></li>\n<li><a class=\"reference internal\" href=\"#running-the-stunnel-setup-program\">Running the stunnel setup program</a></li>\n<li><a class=\"reference internal\" href=\"#starting-the-stunnel-proxy\">Starting the stunnel proxy</a></li>\n<li><a class=\"reference internal\" href=\"#shutting-down-the-stunnel-proxy\">Shutting down the stunnel proxy</a></li>\n<li><a class=\"reference internal\" href=\"#configuring-firewall-on-the-host\">Configuring firewall on the host</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "14-ssl", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12", "insegel_version": "1.1.0"}