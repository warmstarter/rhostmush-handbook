<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.16 -->
<document source="/home/pi/rhostmush-handbook/source/33-qdbm.rst">
    <section ids="converting-database-betwen-gdbm-and-qdbm" names="converting\ database\ betwen\ gdbm\ and\ qdbm">
        <title>Converting database betwen GDBM and QDBM</title>
        <paragraph>Ok, if you plan to recompile your game that is using GDBM to QDBM, or visa versa
            some bad news.</paragraph>
        <paragraph>The databases are NOT COMPATIBLE to each other, at least in the binary form.</paragraph>
        <section ids="downgrading-qdbm-to-gdbm" names="downgrading\ qdbm\ to\ gdbm">
            <title>Downgrading QDBM to GDBM</title>
            <paragraph>I would NEVER change from QDBM back to GDBM, but if you’re set on it these steps:</paragraph>
            <paragraph>You would use the same steps if you plan to move QDBM to GDBM.  I however would
                not do this.  Moving from QDBM to GDBM is a huge step backwards.  Seriously,
                don’t do it unless you have absolutely no other recourse.</paragraph>
            <paragraph>However, WARNING:
                IF you plan (for whatever reason) to move from QDBM to GDBM, you should verify
                the following:
                1.  You have on a 64 bit system, no object that has more than 400 attributes on it.
                2.  You have on a 32 bit system, no object that has more than 750 attributes on it.
                3.  Any CONTENT of any attribute must be below 4000 characters in length.
                4.  Once you have that done, you may follow the procedures below on converting (upgrade)</paragraph>
            <block_quote>
                <paragraph>from GDBM to QDBM.  This works the same as converting (downgrading)
                    QDBM back down to GDBM</paragraph>
            </block_quote>
        </section>
        <section ids="upgradging-gdbm-to-qdbm" names="upgradging\ gdbm\ to\ qdbm">
            <title>Upgradging GDBM to QDBM</title>
            <paragraph>Now, if you’ve kept reading and plan to convert your GDBM database to QDBM great news!
                It’s more stable, it’s faster, and lets you have far more flexibility.</paragraph>
            <paragraph>So, BEFORE YOU RECOMPILE YOUR CODE.  This is what you have to do.</paragraph>
            <section ids="while-logged-in-to-your-mush-issue-the-following-commands" names="while\ logged\ in\ to\ your\ mush,\ issue\ the\ following\ commands">
                <title>While logged in to your mush, issue the following commands</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <paragraph>@dump/flat    – This will make a flatfile dump of your MUSH database</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>wmail/unload  – This will make a flatfile dump of your MAIL database</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>@areg/unload  – If you use the AutoRegistration engine, this dumps it</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>newsdb/unload – If you use the hardcoded news/bbs engine.  This dumps it</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
            <section ids="verify-the-files-exist" names="verify\ the\ files\ exist">
                <title>Verify the files exist</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <comment xml:space="preserve">Server/game/data/netrhost.db.flat</comment>
                        </list_item>
                        <list_item>
                            <comment xml:space="preserve">Server/game/data/RhostMUSH.dump.folder</comment>
                            <comment xml:space="preserve">Server/game/data/RhostMUSH.dump.mail</comment>
                        </list_item>
                        <list_item>
                            <paragraph>(Optional) .. Server/game/data/RhostMUSH.areg.dump</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(Optional) .. Server/game/data/RhostMUSH.news.flat</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
            <section ids="shutdown-the-mush" names="shutdown\ the\ mush">
                <title>Shutdown the MUSH</title>
                <paragraph>@shutdown your mush</paragraph>
            </section>
            <section ids="from-the-server-directory" names="from\ the\ server\ directory">
                <title>From the Server directory</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <paragraph>make clean</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>make confsource
                                1.  Select QDBM and if you wish at this time increase your LBUF size
                                2.  Select any other options you may want</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(r)un and let it compile.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Main DB: Delete (rm) the following files (from Rhost/Server/game/data)
                                netrhost.gdbm*
                                netrhost.db
                                netrhost.db.new
                                netrhost.db.new.prev</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Mail DB: Delete (rm) the following files (from Rhost/Server/game/data)
                                RhostMUSH.folder.dir
                                RhostMUSH.folder.pag
                                RhostMUSH.mail.dir
                                RhostMUSH.mail.pag</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(Optional) AutoReg DB: Delete (rm) the following files (from Rhost/Server/game/data)
                                RhostMUSH.areg.dir
                                RhostMUSH.areg.pag</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(Optional) News/BBS DB: Delete (rm) the following files (from Rhost/Server/game/data)
                                RhostMUSH.news.dir
                                RhostMUSH.news.pag</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
            <section ids="from-the-server-game-directory" names="from\ the\ server/game\ directory">
                <title>From the Server/game directory</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <paragraph>./db_load data/netrhost.gdbm data/netrhost.db.flat data/netrhost.db.new</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>./Startmush</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
            <section ids="while-logged-into-the-mush-issue-the-following-commands" names="while\ logged\ into\ the\ mush\ issue\ the\ following\ commands">
                <title>While logged into the mush issue the following commands</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <paragraph>Load in the mail database
                                wmail/load</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(optional) Load in the autoreg database
                                @areg/load</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>(optional) Load in the news/bbs database
                                newsdb/load</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
            <section ids="verify-that-you-have-qdbm-running-and-your-valid-values" names="verify\ that\ you\ have\ qdbm\ running\ and\ your\ valid\ values">
                <title>Verify that you have QDBM running and your valid values</title>
                <block_quote>
                    <enumerated_list enumtype="upperalpha" prefix="" suffix=".">
                        <list_item>
                            <paragraph>@list options system</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>@list options (spammy)</paragraph>
                        </list_item>
                    </enumerated_list>
                </block_quote>
            </section>
        </section>
    </section>
</document>
