

<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11. Upgrading &mdash; RhostMUSH Handbook  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="copyright" title="Copyright" href="../copyright/" />
    <link rel="next" title="12. Advanced Features" href="../advanced/" />
    <link rel="prev" title="10. Troubleshooting" href="../troubleshooting/" /> 

</head>

<body>
    <header>
        <div class="container">
            <a class="site-nav-toggle hidden-lg-up"><i class="icon-menu"></i></a>
            <a class="site-title" href="../">
                RhostMUSH Handbook
            </a>
        </div>
    </header>


<div class="breadcrumbs-outer hidden-xs-down">
    <div class="container">
        















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="breadcrumbs">
    
      <li><a href="../">Docs</a></li>
        
      <li><span class="section-number">11. </span>Upgrading</li>
    
    
      <li class="breadcrumbs-aside">
        
            
            <a href="../_sources/upgrade.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
</div>
    </div>
</div>
    <div class="main-outer">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-3 site-nav">
                    
<div role="search">
    <form class="search" action="../search/" method="get">
        <div class="icon-input">
            <input type="text" name="q" placeholder="Search" />
            <span class="icon-search"></span>
        </div>
        <input type="submit" value="Go" class="d-hidden" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
    </form>
</div>
                    <div class="site-nav-tree">
                        
                            
                            
                                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/">1. Installing RhostMUSH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install/#rhostmush-requirements">1.1. RhostMUSH Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/#obtaining-rhostmush">1.2. Obtaining RhostMUSH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../features/">2. What RhostMUSH is about and what’s so great about RhostMUSH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features/#recycle-bin">2.1. Recycle bin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#snapshot">2.2. &#64;snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#wizard-and-immortals-by-default">2.3. Wizard and Immortals by default</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#titles-and-captions-to-a-player-s-name">2.4. Titles and Captions to a player’s name</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#have-an-alternate-name-with-locks-for-npc-obfuscation">2.5. Have an alternate name with locks for NPC obfuscation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#have-multiple-player-aliases">2.6. Have multiple player aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#actively-control-how-dark-works-both-game-wide-and-individually">2.7. Actively control how dark works both game-wide and individually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#make-config-file-changes-in-game-without-having-to-reboot-or-have-shell-access">2.8. Make config file changes in-game without having to reboot or have shell access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#execute-any-binary-or-script-as-a-localized-function">2.9. Execute any binary or script as a localized function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#customized-percent-substitutions-like-n-etc">2.10. Customized percent substitutions (like %n, %#, etc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#redefine-percent-substitutions-like-n-etc">2.11. Redefine percent substitutions (like %n, %#, etc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#localize-command-and-function-overrides-in-a-sandbox">2.12. Localize command and function overrides in a sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#multiple-zones">2.13. Multiple Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#optionally-control-enable-or-disable-sideeffects">2.14. Optionally control, enable, or disable sideeffects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#have-31-cross-interactive-realities-for-locations">2.15. Have 31 cross-interactive realities for locations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#override-any-command-with-softcode">2.16. Override any command with softcode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#the-abilility-to-raise-or-lower-permissions-on-the-various">2.17. The abilility to raise or lower permissions on the various</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#customize-new-commands-on-the-connect-screen">2.18. Customize new commands on the connect screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#softcode-any-txt-file-like-connect-txt">2.19. Softcode any txt file (like connect.txt)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#advanced-tracing-methods-for-debugging-your-code-including-labels">2.20. Advanced tracing methods for debugging your code including labels!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#built-in-pretty-printing-of-attributes-with-the-parenmatch-function">2.21. Built in pretty-printing of attributes with the parenmatch() function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#plenty-more-not-mentioned">2.22. Plenty more not mentioned!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#advanced-features-of-rhostmush">2.23. Advanced features of RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features/#random-notes-and-things-to-know-about-rhostmush">2.24. Random notes and things to know about RhostMUSH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../differences/">3. Comparison of modern MUSH servers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../differences/#differences-to-expect-to-the-end-user-between-pennmush-mux-and-rhostmush">3.1. Differences to expect to the end user between PennMUSH, MUX, and RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#comparison-of-features-between-rhostmush-pennmush-and-mux2">3.2. Comparison of features between RhostMUSH, PennMUSH, and MUX2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#organization-of-help-and-wizhelp">3.3. Organization of help and wizhelp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#mail-comsystem-guests-master-rooms-etc">3.4. Mail, comsystem, guests, master rooms, etc..</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#comparisons-of-features">3.5. Comparisons of features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#commands-with-equivalents">3.6. &#64;commands with equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#commands-unique-to-rhostmush">3.7. &#64;commands unique to RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#lock-equivalents">3.8. &#64;lock equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#locks-that-only-exist-in-rhostmush">3.9. &#64;locks that only exist in RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#flag-and-toggle-equivalents">3.10. Flag and toggle equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#flags-and-toggles-that-only-exist-in-rhostmush">3.11. Flags and toggles that only exist in RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#power-equivalents">3.12. &#64;power equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#functions-equivalents">3.13. Functions equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#what-may-need-to-be-modified-to-get-softcode-from-pennmush-tinymush2-tinymush3-or-mux2-to-work-on-rhost">3.14. What may need to be modified to get softcode from PennMUSH, TinyMUSH2, TinyMUSH3, or MUX2 to work on Rhost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../differences/#things-other-mushes-can-do-that-rhost-can-not-and-how-to-emulate-it">3.15. Things other mushes can do that Rhost can not and how to emulate it</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation/">4. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/#compiling-the-code">4.1. Compiling the code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#configuring-the-game">4.2. Configuring the game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#starting-the-game">4.3. Starting the game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#first-login-to-the-game">4.4. First login to the game</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#reporting-bugs-or-getting-help">4.5. Reporting bugs or getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#installing-using-an-ansible-playbook">4.6. Installing using an ansible playbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#quickinstall-guide-to-rhostmush">4.7. Quickinstall guide to RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#what-to-type-to-configure-and-get-your-rhostmush-up-and-running">4.8. What to type to configure and get your RhostMUSH up and running</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/#windows">4.9. Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../database/">5. Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/#loading-an-existing-database">5.1. Loading an existing Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/#converting-a-flatfile-database-for-use-in-rhostmush">5.2. Converting a flatfile database for use in RhostMUSH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted/">6. Gettin Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/#what-to-ype-to-get-the-basics-running-if-you-did-not-choose-a-pre-existing-flatfile">6.1. What to ype to get the basics running if you did not choose a pre-existing flatfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/#minimal-db-instructions">6.2. Minimal DB instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gettingstarted/#ambrosia-s-minimal-rhost-db">6.3. Ambrosia’s Minimal Rhost DB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../toggles/">7. What FLAGS, TOGGLES, POWERS, DEPOWERS, and BITLEVELS mean in RhostMUSH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#flags">7.1. Flags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#toggles">7.2. Toggles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#power">7.3. &#64;power</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#depower">7.4. &#64;depower</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#multi-tiered-bitlevel-systems">7.5. Multi-tiered bitlevel systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../toggles/#altering-bitlevels">7.6. Altering bitlevels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security/">8. Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../security/#considerations-to-locking-down-restrictions-in-rhostmush">8.1. Considerations to locking down restrictions in RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/#extended-lockdown-of-the-mush-and-considerations">8.2. Extended lockdown of the mush and considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/#methods-to-block-anonymous-connections-and-the-pros-and-cons-of-doing-so">8.3. Methods to block anonymous connections and the pros and cons of doing so</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/#setting-up-an-ssl-tunnel-for-secure-connection-options">8.4. Setting up an SSL tunnel for secure connection options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/">9. Maintenance</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#signals-and-why-you-need-them-for-control">9.1. Signals and why you need them for control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#shutting-down-gracefully">9.2. Shutting down gracefully</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#autoshutdown-script">9.3. Autoshutdown script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#network-port-redirector">9.4. Network Port redirector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#using-the-built-in-cron-system-for-periodically-running-commands">9.5. Using the built-in cron system for periodically running commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#the-following-scripts-are-used-in-the-game-directory">9.6. The following scripts are used in the game directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../maintenance/#textfiles-for-rhostmush">9.7. Textfiles for RhostMUSH</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">10. Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/#stack-limit-and-debugging">10.1. Stack limit and debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/#how-to-reset-the-password-for-1">10.2. How to reset the password for #1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/#troubleshooting-difficulties-compiling-rhostmush">10.3. Troubleshooting difficulties compiling RhostMUSH</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/#dealing-with-db-corruption">10.4. Dealing with DB Corruption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/#dealing-with-a-corrupt-mail-database">10.5. Dealing with a corrupt mail database</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. Upgrading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#converting-database-betwen-gdbm-and-qdbm">11.1. Converting database betwen GDBM and QDBM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-rhostmush-prior-to-3-9-5p2">11.2. Updating RhostMUSH prior to 3.9.5p2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-mysql-to-rhostmush-older-than-3-9-5p2">11.3. Adding MySQL to RhostMUSH older than 3.9.5p2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/">12. Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#adding-hardcoded-modules">12.1. Adding hardcoded modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#shutting-down-gracefully">12.2. Shutting down gracefully</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#reality-levels">12.3. Reality levels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#execscript-and-external-programs-and-scripts">12.4. Execscript and external programs and scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#using-printf-for-advanced-text-output">12.5. Using printf() for advanced text output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/#format-for-image-files">13. Format for image files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/#help-key-indexes-for-the-values">13.1. HELP key indexes for the values:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../flags/">14. Comparison of Flags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powers/">15. Comparison of powers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpfile/">16. RhostMUSH Internal Help Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wizhelpfile/">17. RhostMUSH Internal Wizhelp Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/">18. Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-4-0-update">18.1. RhostMUSH 4.0 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-5-update">18.2. RhostMUSH 3.9.5 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-4-update">18.3. RhostMUSH 3.9.4 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-3-update">18.4. RhostMUSH 3.9.3 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-2-update">18.5. RhostMUSH 3.9.2 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-1-update">18.6. RhostMUSH 3.9.1 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-9-0-p00-update">18.7. RhostMUSH 3.9.0 p00 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p18-update">18.8. RhostMUSH 3.2.4 p18 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p17-update">18.9. RhostMUSH 3.2.4 p17 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p16-update">18.10. RhostMUSH 3.2.4 p16 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p15-update">18.11. RhostMUSH 3.2.4 p15 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p14-update">18.12. RhostMUSH 3.2.4 p14 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p13-update">18.13. RhostMUSH 3.2.4 p13 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p12-update">18.14. RhostMUSH 3.2.4 p12 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p11-update">18.15. RhostMUSH 3.2.4 p11 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p10-update">18.16. RhostMUSH 3.2.4 p10 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p9-update">18.17. RhostMUSH 3.2.4 p9 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p8-update">18.18. RhostMUSH 3.2.4 p8 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p7-update">18.19. RhostMUSH 3.2.4 p7 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p6-update">18.20. RhostMUSH 3.2.4 p6 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p5-update">18.21. RhostMUSH 3.2.4 p5 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p4-update">18.22. RhostMUSH 3.2.4 p4 Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/#rhostmush-3-2-4-p3-update">18.23. RhostMUSH 3.2.4 p3 Update</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nda/">19. Historical Non-Disclosure Agreement</a></li>
</ul>

                            
                        
                    </div>
                </div>
                <div class="col-12 col-lg-9">
                    <div class="document">
                        
                            
  <div class="section" id="upgrading">
<h1><span class="section-number">11. </span>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h1>
<div class="section" id="converting-database-betwen-gdbm-and-qdbm">
<h2><span class="section-number">11.1. </span>Converting database betwen GDBM and QDBM<a class="headerlink" href="#converting-database-betwen-gdbm-and-qdbm" title="Permalink to this headline">¶</a></h2>
<p>Ok, if you plan to recompile your game that is using GDBM to QDBM, or visa versa
some bad news.</p>
<p>The databases are NOT COMPATIBLE to each other, at least in the binary form.</p>
<div class="section" id="downgrading-qdbm-to-gdbm">
<h3><span class="section-number">11.1.1. </span>Downgrading QDBM to GDBM<a class="headerlink" href="#downgrading-qdbm-to-gdbm" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>I would NEVER change from QDBM back to GDBM, but if you’re set on it these steps:</p>
<p>You would use the same steps if you plan to move QDBM to GDBM.  I however would
not do this.  Moving from QDBM to GDBM is a huge step backwards.  Seriously,
don’t do it unless you have absolutely no other recourse.</p>
<p>IF you plan (for whatever reason) to move from QDBM to GDBM, you should verify
the following</p>
</div>
<ol class="arabic simple">
<li><p>You have on a 64 bit system, no object that has more than 400 attributes on it.</p></li>
<li><p>You have on a 32 bit system, no object that has more than 750 attributes on it.</p></li>
<li><p>Any CONTENT of any attribute must be below 4000 characters in length.</p></li>
<li><p>Once you have that done, you may follow the procedures below on converting (upgrade) from GDBM to QDBM.  This works the same as converting (downgrading) QDBM back down to GDBM</p></li>
</ol>
</div>
<div class="section" id="upgradging-gdbm-to-qdbm">
<h3><span class="section-number">11.1.2. </span>Upgradging GDBM to QDBM<a class="headerlink" href="#upgradging-gdbm-to-qdbm" title="Permalink to this headline">¶</a></h3>
<p>Now, if you’ve kept reading and plan to convert your GDBM database to QDBM great news!
It’s more stable, it’s faster, and lets you have far more flexibility.</p>
<p>So, BEFORE YOU RECOMPILE YOUR CODE.  This is what you have to do.</p>
<div class="section" id="while-logged-in-to-your-mush-issue-the-following-commands">
<h4><span class="section-number">11.1.2.1. </span>While logged in to your mush, issue the following commands<a class="headerlink" href="#while-logged-in-to-your-mush-issue-the-following-commands" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>&#64;dump/flat    – This will make a flatfile dump of your MUSH database</p></li>
<li><p>wmail/unload  – This will make a flatfile dump of your MAIL database</p></li>
<li><p>&#64;areg/unload  – If you use the AutoRegistration engine, this dumps it</p></li>
<li><p>newsdb/unload – If you use the hardcoded news/bbs engine.  This dumps it</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="verify-the-files-exist">
<h4><span class="section-number">11.1.2.2. </span>Verify the files exist<a class="headerlink" href="#verify-the-files-exist" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>Server/game/data/netrhost.db.flat</p></li>
<li><p>Server/game/data/RhostMUSH.dump.folder
Server/game/data/RhostMUSH.dump.mail</p></li>
<li><p>(Optional) Server/game/data/RhostMUSH.areg.dump</p></li>
<li><p>(Optional) Server/game/data/RhostMUSH.news.flat</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="shutdown-the-mush">
<h4><span class="section-number">11.1.2.3. </span>Shutdown the MUSH<a class="headerlink" href="#shutdown-the-mush" title="Permalink to this headline">¶</a></h4>
<p>&#64;shutdown your mush</p>
</div>
<div class="section" id="from-the-server-directory">
<h4><span class="section-number">11.1.2.4. </span>From the Server directory<a class="headerlink" href="#from-the-server-directory" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>make clean</p></li>
<li><p>make confsource
1.  Select QDBM and if you wish at this time increase your LBUF size
2.  Select any other options you may want</p></li>
<li><p>(r)un and let it compile.</p></li>
<li><p>Main DB: Delete (rm) the following files (from Rhost/Server/game/data)
netrhost.gdbm*
netrhost.db
netrhost.db.new
netrhost.db.new.prev</p></li>
<li><p>Mail DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.folder.dir
RhostMUSH.folder.pag
RhostMUSH.mail.dir
RhostMUSH.mail.pag</p></li>
<li><p>(Optional) AutoReg DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.areg.dir
RhostMUSH.areg.pag</p></li>
<li><p>(Optional) News/BBS DB: Delete (rm) the following files (from Rhost/Server/game/data)
RhostMUSH.news.dir
RhostMUSH.news.pag</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="from-the-server-game-directory">
<h4><span class="section-number">11.1.2.5. </span>From the Server/game directory<a class="headerlink" href="#from-the-server-game-directory" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>./db_load data/netrhost.gdbm data/netrhost.db.flat data/netrhost.db.new</p></li>
<li><p>./Startmush</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="while-logged-into-the-mush-issue-the-following-commands">
<h4><span class="section-number">11.1.2.6. </span>While logged into the mush issue the following commands<a class="headerlink" href="#while-logged-into-the-mush-issue-the-following-commands" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>Load in the mail database
wmail/load</p></li>
<li><p>(optional) Load in the autoreg database
&#64;areg/load</p></li>
<li><p>(optional) Load in the news/bbs database
newsdb/load</p></li>
</ol>
</div></blockquote>
</div>
<div class="section" id="verify-that-you-have-qdbm-running-and-your-valid-values">
<h4><span class="section-number">11.1.2.7. </span>Verify that you have QDBM running and your valid values<a class="headerlink" href="#verify-that-you-have-qdbm-running-and-your-valid-values" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ol class="upperalpha simple">
<li><p>&#64;list options system</p></li>
<li><p>&#64;list options (spammy)</p></li>
</ol>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="updating-rhostmush-prior-to-3-9-5p2">
<h2><span class="section-number">11.2. </span>Updating RhostMUSH prior to 3.9.5p2<a class="headerlink" href="#updating-rhostmush-prior-to-3-9-5p2" title="Permalink to this headline">¶</a></h2>
<p>Ok.</p>
<p>So you’re running an old RhostMUSH.</p>
<p>One prior to 3.9.5p2 and want to take advantage of the new
format of the Makefile and the automated mysql stuff and
all the other goodies that isn’t really (easilly) done
with just patch.sh.</p>
<p>Well, you’re in luck.  It is actually fairly easy to do.</p>
<p>This is what you have to do.</p>
<p>First thing’s first.</p>
<ol class="arabic">
<li><p>Log into your existing mush.  Let’s make current backups
of all your flatfiles.  Issue:
A. &#64;dump/flat
B. wmail/unload
C. &#64;areg/unload
D. newsdb/unload</p></li>
<li><p>Shutdown your game (&#64;shutdown)</p></li>
<li><p>Make an image of all your current backed up files.  From The Server/game directory you would type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">backup_flat</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">s</span>
</pre></div>
</div>
<p>Please remember the ‘-s’ to the ./backup_flat.sh.</p>
</li>
<li><p>Make note of the most recently created file in the directory Server/game/oldflat.  It’s usually named something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RhostMUSH</span><span class="o">.</span><span class="n">dbflat1</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
<p>You will need this file later.</p>
</li>
<li><p>Rename your ‘Rhost’ directory to something else.  This is the directory that you have containing the ‘Server’ directory.  Name it anything you want other than ‘Rhost’.  For those not used to unix you would type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mv</span> <span class="n">Rhost</span> <span class="n">Rhost_old</span>
</pre></div>
</div>
</li>
<li><p>Pull in the latest Rhost.  You would type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">RhostMUSH</span><span class="o">/</span><span class="n">trunk</span> <span class="n">Rhost</span>
</pre></div>
</div>
<p>You would type this in the same directory you have renamed your old ‘Rhost’ directory</p>
</li>
<li><p>go into the Rhost/Server directory.   Type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">confsource</span>
</pre></div>
</div>
<p>Select what options you want (including the mysql and other goodies) then compile it (also within the menu, it’s the ‘r’ option).</p>
</li>
</ol>
<p>8   Once your game is compiled and ready to go you need to copy in the data from your old game.  Copy the RhostMUSH.dbflat1.tar.gz we mentioned in step #4 to the Server/game directory of your NEW GAME DIRECTORY.  From within the ‘game’ directory of your current game you should be able to issue (if you named the old one Rhost_old). Again this needs to be done FROM YOUR Server/game directory!!!</p>
<blockquote>
<div><ol class="upperalpha">
<li><p>cp netrhost.conf netrhost.conf.orig</p></li>
<li><p>cp ../../Rhost_old/Server/game/RhostMUSH.dbflat1.tar.gz .</p></li>
<li><p>tar -zxvf RhostMUSH.dbflat1.tar.gz</p></li>
<li><p>Compare your current netrhost.conf to the default one that came with the source (that you renamed to netrhost.conf.orig).  Likely the only sections you have to add to your current netrhost.conf (that came with your RhostMUSH.dbflat1.tar.gz archive), will be toward the end, with the include rhost_ingame.conf and rhost_mysql.conf.  Depending on how old your game is coming from you may need to add more options.  Any config option that is the same between the netrhost.conf files do not have to be copied over, and you want to keep your custom settings (like don’t port or other stuff you have already customized).</p></li>
<li><p>Load in your flatfile information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">db_load</span> <span class="n">data</span><span class="o">/</span><span class="n">netrhost</span><span class="o">.</span><span class="n">gdbm</span> <span class="n">data</span><span class="o">/</span><span class="n">netrhost</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">flat</span> <span class="n">data</span><span class="o">/</span><span class="n">netrhost</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">new</span>
</pre></div>
</div>
</li>
<li><p>Your ./Startmush should re-index all your txt files you originally made:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Startmush</span>
</pre></div>
</div>
</li>
<li><p>In your game type the following as an immortal or as #1.</p></li>
</ol>
<blockquote>
<div><ol class="arabic">
<li><p>Load in your mail flatfile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wmail</span><span class="o">/</span><span class="n">load</span>
</pre></div>
</div>
</li>
<li><p>Load in your autoregistration flatfile (if available):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@areg</span><span class="o">/</span><span class="n">load</span>
</pre></div>
</div>
</li>
<li><p>Load in your hardcoded bbs flatfile (if available):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newsdb</span><span class="o">/</span><span class="n">load</span>
</pre></div>
</div>
</li>
</ol>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>You should be good to go on a current directory structure for Rhost.  Enjoy!</p></li>
</ol>
</div>
<div class="section" id="adding-mysql-to-rhostmush-older-than-3-9-5p2">
<h2><span class="section-number">11.3. </span>Adding MySQL to RhostMUSH older than 3.9.5p2<a class="headerlink" href="#adding-mysql-to-rhostmush-older-than-3-9-5p2" title="Permalink to this headline">¶</a></h2>
<p>MySQL is now native in RhostMUSH as of 3.9.5p2.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To autodetect it, YOU MUST HAVE mysql_config installed and running on your server.  Without this, even if you have mysql db installed it won’t be able to recognize the parameters you will need for it and will thus fail.  Please check your linux distribution to see what packages are needed to install mysql_config.</p>
</div>
<p>Download the git repository to a seperate directory so that you can
copy over the files that it requires you to.</p>
<p>Suggestion:  git clone <a class="reference external" href="https://github.com/RhostMUSH/trunk">https://github.com/RhostMUSH/trunk</a> ~/tmprho</p>
<p>If you are patching UP from an older version, you need to update
the following files:</p>
<ol class="arabic simple">
<li><p>update your src/Makefile to the one in the 3.9.5p2+ repo
( cp ~/tmprho/Server/src/Makefile ~/Rhost/Server/src/Makefile )</p></li>
<li><p>update your bin/asksource.* files to the one in the 3.9.5p2+ repo
( cp ~/tmprho/Server/bin/asksource.* ~/Rhost/Server/bin/ )</p></li>
<li><p>append ‘include rhost_mysql.conf’ BEFORE the rhost_ingame.conf file
and before the section that says ‘define local aliases’ toward the end of
your netrhost.conf file.
( edit your ~/Rhost/Server/game/netrhost.conf file )</p></li>
<li><p>copy the game/rhost_mysql.conf file from the 3.9.5p2+ repo
( cp ~/tmprho/Server/game/rhost_mysql.conf ~/Rhost/Server/game/ )</p></li>
<li><p>The following lines have to be REPLACED/CHANGED in local.c ( toward the top ):
( you may edit this or copy the one from the other distro )
( do either:  edit ~/Rhost/Server/src/local.c )
(        or:  cp ~/tmprho/Server/src/local.c ~/Rhost/Server/src/local.c )</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>IF REPLACING/CHANGING local.c COPY BELOW</p>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Called when the mush starts up, immediatly prior to the main game</span>
<span class="cm"> * loop being entered. By this point all databases are loaded and</span>
<span class="cm"> * all variables configured.</span>
<span class="cm"> */</span>
<span class="cp">#ifdef MYSQL_VERSION</span>
   <span class="k">extern</span> <span class="kt">void</span> <span class="n">local_mysql_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
   <span class="k">extern</span> <span class="kt">int</span> <span class="n">sql_shutdown</span><span class="p">(</span><span class="n">dbref</span> <span class="n">player</span><span class="p">);</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef SQLITE</span>
   <span class="k">extern</span> <span class="kt">void</span> <span class="n">local_sqlite_init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="cp">#endif </span><span class="cm">/* SQLITE */</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">local_startup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">#ifdef SQLITE</span>
   <span class="n">local_sqlite_init</span><span class="p">();</span>
<span class="cp">#endif </span><span class="cm">/* SQLITE */</span><span class="cp"></span>
<span class="cp">#ifdef MYSQL_VERSION</span>
   <span class="n">local_mysql_init</span><span class="p">();</span>
<span class="cp">#endif</span>
   <span class="n">load_regexp_functions</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/* Called immediatly after the main game loop exits. At this point</span>
<span class="cm"> * all databases and variables are still configured</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">local_shutdown</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">#ifdef MYSQL_VERSION</span>
   <span class="n">sql_shutdown</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Issue ‘make clean’ then make confsource to rebuild using the latest
builder script to build in the mysql changes.</p></li>
</ol>
</div>
</div>


                        
                    </div>
                </div>
            </div>
        </div>
    </div>    


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  
    <div class="footer" role="contentinfo">
        <div class="container">
            &#169; <a href="../copyright/">Copyright</a> 2021, wstarter.
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.1.
        </div>
    </div>  

</body>
</html>